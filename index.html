<script>
document.getElementById('csvFileInput').addEventListener('change', function(event) {
    const file = event.target.files[0];
    if (!file) return;

    Papa.parse(file, {
        header: true,
        skipEmptyLines: true,
        complete: function(results) {
            const data = results.data;
            
            // ここで列名を画面に表示する！！
            const keys = Object.keys(data[0]);
            document.getElementById('output').innerHTML = '<h2>検出された列名一覧:</h2><ul>' + keys.map(key => `<li>${key}</li>`).join('') + '</ul>';

            // このあと通常処理
            processSimpleSum(data);
        }
    });
});